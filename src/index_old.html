<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Tool Test VR</title>
  <meta name="description" content="Tool Test VR">

  <script src="js/libs.js"></script>
  <!--<script type="application/javascript" src="https://rawgit.com/aframevr/aframe/master/dist/aframe-master.min.js"></script>-->

  <script src="js/main.js"></script>

  <!--<script src="js/aframe-gltf.min.js"></script>-->
  <script src="https://rawgit.com/ngokevin/kframe/master/dist/kframe.min.js"></script>
  <script
      src="https://rawgit.com/fernandojsg/aframe-teleport-controls/master/dist/aframe-teleport-controls.min.js"></script>
</head>

<body>

<div class="scene-container" style="height: 100%; width: 100%"></div>
<script src="build/bundle.js"></script>
<!-- TODO all following content is deprecated -->

<!-- debug -->
<!-- pool="mixin: board; size: 10" // TODO for aframe 0.4.0 -->
<a-scene stats
         keyboard-shortcuts="enterVR: true; resetSensor: true"
         physics="gravity: -9.8"
         antialias="true"
>
  <!-- fog="type: linear; color: #CCC; near: 5; far: 20" -->

  <!-- Asset management system. -->
  <a-assets timeout="10000">
    <!-- Sounds -->
    <audio id="saw-running" src="assets/sound/saw_running.ogg"></audio>
    <audio id="saw-begin" src="assets/sound/saw_begin.ogg"></audio>
    <audio id="saw-end" src="assets/sound/saw_end.ogg"></audio>

    <!-- 3D Models -->
    <a-asset-item id="mainTable" src="assets/3d/mainTable/IKEA Tisch.dae"></a-asset-item>

    <!-- Textures -->
    <!-- <img id="sky" src="assets/img/360/tokio.jpg"> -->
    <img id="wood-planks" src="assets/img/tex/re_planks.png">
    <img id="wood-toon" src="assets/img/tex/wood_texture_by_dellot.jpg">

    <!-- Mixins: Materials -->
    <a-mixin id="tool-color-prime" material="color: green"></a-mixin>
    <a-mixin id="tool-color-second" material="color: dark-grey"></a-mixin>

    <!-- Mixins: Objects -->
    <a-mixin id="cube"
             dynamic-body="mass: 10; linearDamping: 0.05; angularDamping: 0.05"
             geometry="primitive: box; height: 0.30; width: 0.30; depth: 0.30"
             material="color: #EF2D00;"></a-mixin>
  </a-assets>

  <!-- SCENE -->
  <a-entity id="user">
    <a-camera></a-camera>
    <!--<a-entity camera look-controls wasd-controls></a-entity>-->
    <a-entity id="leftController"
              static-body="shape: sphere; sphereRadius: 0.02;"
              vive-controls="hand: left"
              sphere-collider="objects: .cube"
              grab></a-entity>
    <a-entity id="rightController"
              static-body="shape: sphere; sphereRadius: 0.02;"
              vive-controls="hand: right"
              sphere-collider="objects: .cube"
              grab></a-entity>
  </a-entity>

  <!-- LIGHTS -->
  <a-entity light="type: ambient; color: #BBB"></a-entity>
  <a-entity light="type: directional; color: #FFF; intensity: 0.6;" position="-0.5 1 1"></a-entity>

  <!-- TODO resolve warnings which is caused by asynchronous calls/loading -->
  <!-- static-body="shape: hull;" -->
  <a-entity collada-model="#mainTable"
            position="2 0 -1">
    <!--sound="src: #saw-running; autoplay: false; loop: true">-->
  </a-entity>
  <!-->

  <a-entity position="0 0 -1">
    <a-entity class="cube" mixin="cube" position="0.30 1.65 0"></a-entity>
    <a-entity class="cube" mixin="cube" position="0 1.95 0"></a-entity>
    <a-entity class="cube" mixin="cube" position="-0.30 1.65 0"></a-entity>

    <a-entity class="cube" mixin="cube" position="0.60 1.35 0"></a-entity>
    <a-entity class="cube" mixin="cube" position="0.60 1.05 0"></a-entity>
    <a-entity class="cube" mixin="cube" position="0.60 0.75 0"></a-entity>
    <a-entity class="cube" mixin="cube" position="0.60 0.45 0"></a-entity>
    <a-entity class="cube" mixin="cube" position="0.60 0.15 0"></a-entity>

    <a-entity class="cube" mixin="cube" position="0.30 0.75 0"></a-entity>
    <a-entity class="cube" mixin="cube" position="0 0.75 0"></a-entity>
    <a-entity class="cube" mixin="cube" position="-0.30 0.75 0"></a-entity>

    <a-entity class="cube" mixin="cube" position="-0.60 1.35 0"></a-entity>
    <a-entity class="cube" mixin="cube" position="-0.60 1.05 0"></a-entity>
    <a-entity class="cube" mixin="cube" position="-0.60 0.75 0"></a-entity>
    <a-entity class="cube" mixin="cube" position="-0.60 0.45 0"></a-entity>
    <a-entity class="cube" mixin="cube" position="-0.60 0.15 0"></a-entity>
  </a-entity>

  <a-entity position="0 0 -3">
    <a-entity id="firstBox"
              geometry="primitive: box"
              material="src: #wood-toon"
              cuttable
              position="-1 0.5 0.8" rotation="0 45 0"
              width="1"
              height="1" depth="1" color="#4CC3D9">
      <a-animation attribute="rotation"
                   dur="10000"
                   fill="forwards"
                   easing="linear"
                   from="0 0 0"
                   to="0 360 0"
                   repeat="indefinite"></a-animation>
    </a-entity>

    <a-plane
        rotation="-90 0 0"
        width="100"
        height="100"
        static-body
        color="#EEE"
        repeat="100 100"
        src="#wood-planks"></a-plane>
  </a-entity>

</a-scene>

</body>
</html>
